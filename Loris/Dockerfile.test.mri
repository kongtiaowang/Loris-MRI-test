# Use the official Ubuntu base image
FROM ubuntu:20.04

# Set environment variables to avoid interactive prompts during package installation
ENV DEBIAN_FRONTEND=noninteractive

# Update the package list and install build-essential, checkinstall, and cmake
RUN apt-get update && \
    apt-get install -y build-essential checkinstall cmake

# Install Perl CPAN and update dependencies
RUN apt-get install -y perl && \
    perl -MCPAN -e 'install CPAN' && \
    perl -MCPAN -e 'reload cpan'

# Install Python 3, pip, and virtualenv
RUN apt-get install -y python3 python3-dev python3-pip libmysqlclient-dev virtualenv

# Install MINC toolkit dependencies
RUN apt-get install -y libc6 libstdc++6 imagemagick libgl1-mesa-glx libglu1-mesa

# Download and install the MINC toolkit package (assuming a specific version)
ADD http://bic-mni.github.io/downloads/minc-toolkit-1.9.17-20200814-Ubuntu_20.04-amd64.deb /tmp/minc-toolkit.deb
RUN dpkg -i /tmp/minc-toolkit.deb && \
    rm /tmp/minc-toolkit.deb && \
    ls
